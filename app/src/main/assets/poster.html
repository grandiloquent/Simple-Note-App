<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    
    
<style>body {
    background-color: #fff;
}

#my-node {
    font-size: 14px;
    background-color: #fff;
    display: flex;
    flex-direction: column;
    max-width: 800px;
}

.wrapper {
    border-radius: 12px;
    border: 1px solid #dadce0;
    overflow: hidden;
    box-sizing: border-box;
    background-color: #f2f2f2;
}

p {
    margin: 24px 0 0 0;
}

img {
    width: 100%;
}

.text {
    padding: 8px;
}</style></head>

<body>
    <!-- <canvas width="800" height="800"></canvas> -->
    <div style="display: flex;flex-direction: column;">
        <input type="file">
        <textarea></textarea>
    </div>
    <div id="my-node">
        <div class="wrapper">
            <img>
            <div class="text">
            </div>

        </div>
    </div>
<script>!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).htmlToImage={})}(this,(function(t){"use strict";function e(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{a(r.next(t))}catch(t){o(t)}}function c(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,c)}a((r=r.apply(t,e||[])).next())}))}function n(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(a){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(u=0)),u;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return u.label++,{value:c[1],done:!1};case 5:u.label++,r=c[1],c=[0];continue;case 7:c=u.ops.pop(),u.trys.pop();continue;default:if(!(i=u.trys,(i=i.length>0&&i[i.length-1])||6!==c[0]&&2!==c[0])){u=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<><><i[2]){u.label=i[2],u.ops.push(c);break}i[2]&&u.ops.pop(),u.trys.pop();continue}c=e.call(t,u)}catch(t){c=[6,t],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void="" 0,done:!0}}([c,a])}}}var="" r,i="(r=0,function(){return" r+="1,&quot;u&quot;.concat(&quot;0000&quot;.concat((Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)).concat(r)});function" o(t){for(var="" e=""></i[2]){u.label=i[2],u.ops.push(c);break}i[2]&&u.ops.pop(),u.trys.pop();continue}c=e.call(t,u)}catch(t){c=[6,t],r=0}finally{n=i=0}if(5&c[0])throw><r;n++)e.push(t[n]);return e}function="" u(t,e){var="" n="(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return" n?parsefloat(n.replace("px","")):0}function="" c(t,e){void="" 0="==e&&(e={});var" n,r,i,o="e.width||(r=u(n=t,&quot;border-left-width&quot;),i=u(n,&quot;border-right-width&quot;),n.clientWidth+r+i),c=e.height||function(t){var" e="u(t,&quot;border-top-width&quot;),n=u(t,&quot;border-bottom-width&quot;);return" t.clientheight+e+n}(t);return{width:o,height:c}}var="" a="16384;function" s(t,e){return="" void="" 0="==e&&(e={}),t.toBlob?new" promise((function(n){t.toblob(n,e.type?e.type:"image/png",e.quality?e.quality:1)})):new="" promise((function(n){for(var="" r="window.atob(t.toDataURL(e.type?e.type:void" 0,e.quality?e.quality:void="" 0).split(",")[1]),i="r.length,o=new" uint8array(i),u=""></r;n++)e.push(t[n]);return><i;u+=1)o[u]=r.charcodeat(u);n(new blob([o],{type:e.type?e.type:"image/png"}))}))}function="" l(t){return="" new="" promise((function(e,n){var="" r="new" image;r.decode="function(){return" e(r)},r.onload="function(){return" e(r)},r.onerror="n,r.crossOrigin=&quot;anonymous&quot;,r.decoding=&quot;async&quot;,r.src=t}))}function" f(t){return="" e(this,void="" 0,void="" 0,(function(){return="" n(this,(function(e){return[2,promise.resolve().then((function(){return(new="" xmlserializer).serializetostring(t)})).then(encodeuricomponent).then((function(t){return"data:image/svg+xml;charset="utf-8,&quot;.concat(t)}))]}))}))}function" h(t,r,i){return="" e(this,void="" 0,void="" 0,(function(){var="" e,o,u;return="" n(this,(function(n){return="" e="http://www.w3.org/2000/svg" ,o="document.createElementNS(e,&quot;svg&quot;),u=document.createElementNS(e,&quot;foreignObject&quot;),o.setAttribute(&quot;width&quot;,&quot;&quot;.concat(r)),o.setAttribute(&quot;height&quot;,&quot;&quot;.concat(i)),o.setAttribute(&quot;viewBox&quot;,&quot;0" 0="" ".concat(r,"="" ").concat(i)),u.setattribute("width","100%"),u.setattribute("height","100%"),u.setattribute("x","0"),u.setattribute("y","0"),u.setattribute("externalresourcesrequired","true"),o.appendchild(u),u.appendchild(t),[2,f(o)]}))}))}var="" d="function(t,e){if(t" instanceof="" e)return!0;var="" n="Object.getPrototypeOf(t);return" null!="=n&&(n.constructor.name===e.name||d(n,e))};function" v(t,e,n){var="" r="." .concat(t,":").concat(e),i="n.cssText?function(t){var" e="t.getPropertyValue(&quot;content&quot;);return&quot;&quot;.concat(t.cssText,&quot;" content:="" '").concat(e.replace(/'|"/g,""),"';")}(n):function(t){return="" o(t).map((function(e){var="" n="t.getPropertyValue(e),r=t.getPropertyPriority(e);return&quot;&quot;.concat(e,&quot;:" ").concat(n).concat(r?"="" !important":"",";")})).join("="" ")}(n);return="" document.createtextnode("".concat(r,"{").concat(i,"}"))}function="" p(t,e,n){var="" r="window.getComputedStyle(t,n),o=r.getPropertyValue(&quot;content&quot;);if(&quot;&quot;!==o&&&quot;none&quot;!==o){var" u="i();try{e.className=&quot;&quot;.concat(e.className,&quot;" ").concat(u)}catch(t){return}var="" c="document.createElement(&quot;style&quot;);c.appendChild(v(u,n,r)),e.appendChild(c)}}var" g="application/font-woff" ,m="image/jpeg" ,w="{woff:g,woff2:g,ttf:&quot;application/font-truetype&quot;,eot:&quot;application/vnd.ms-fontobject&quot;,png:&quot;image/png&quot;,jpg:m,jpeg:m,gif:&quot;image/gif&quot;,tiff:&quot;image/tiff&quot;,svg:&quot;image/svg+xml&quot;,webp:&quot;image/webp&quot;};function" b(t){var="" e="function(t){var" e="/\.([^./]*?)$/g.exec(t);return" e?e[1]:""}(t).tolowercase();return="" w[e]||""}function="" y(t){return-1!="=t.search(/^(data:)/)}function" x(t,e){return"data:".concat(e,";base64,").concat(t)}function="" s(t,r,i){return="" e(this,void="" 0,void="" 0,(function(){var="" e,o;return="" n(this,(function(n){switch(n.label){case="" 0:return[4,fetch(t,r)];case="" 1:if(404="==(e=n.sent()).status)throw" new="" error('resource="" "'.concat(e.url,'"="" not="" found'));return[4,e.blob()];case="" 2:return="" o="n.sent(),[2,new" promise((function(t,n){var="" r="new" filereader;r.onerror="n,r.onloadend=function(){try{t(i({res:e,result:r.result}))}catch(t){n(t)}},r.readAsDataURL(o)}))]}}))}))}var" e="{};function" c(t,r,i){return="" e(this,void="" 0,void="" 0,(function(){var="" e,o,u,c,a;return="" n(this,(function(n){switch(n.label){case="" 0:if(e="function(t,e,n){var" r="t.replace(/\?.*/,&quot;&quot;);return" n&&(r="t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,&quot;&quot;)),e?&quot;[&quot;.concat(e,&quot;]&quot;).concat(r):r}(t,r,i.includeQueryParams),null!=E[e])return[2,E[e]];i.cacheBust&&(t+=(/\?/.test(t)?&quot;&&quot;:&quot;?&quot;)+(new" date).gettime()),n.label="1;case" 1:return="" n.trys.push([1,3,,4]),[4,s(t,i.fetchrequestinit,(function(t){var="" e="t.res,n=t.result;return" r||(r="e.headers.get(&quot;Content-Type&quot;)||&quot;&quot;),function(t){return" t.split(/,/)[1]}(n)}))];case="" 2:return="" u="n.sent(),o=x(u,r),[3,4];case" 3:return="" c="n.sent(),o=i.imagePlaceholder||&quot;&quot;,a=&quot;Failed" to="" fetch="" resource:="" ".concat(t),c&&(a="string" =="typeof" c?c:c.message),a&&console.warn(a),[3,4];case="" 4:return="" e[e]="o,[2,o]}}))}))}function" p(t){return="" e(this,void="" 0,void="" 0,(function(){var="" e;return="" n(this,(function(n){return"data:,"="==(e=t.toDataURL())?[2,t.cloneNode(!1)]:[2,l(e)]}))}))}function" r(t,r){return="" e(this,void="" 0,void="" 0,(function(){var="" e,i,o,u;return="" n(this,(function(n){switch(n.label){case="" 0:return="" t.currentsrc?(e="document.createElement(&quot;canvas&quot;),i=e.getContext(&quot;2d&quot;),e.width=t.clientWidth,e.height=t.clientHeight,null==i||i.drawImage(t,0,0,e.width,e.height),[2,l(e.toDataURL())]):(o=t.poster,u=b(o),[4,C(o,u,r)]);case" 1:return[2,l(n.sent())]}}))}))}function="" t(t){var="" r;return="" e(this,void="" 0,void="" 0,(function(){return="" n(this,(function(e){switch(e.label){case="" 0:return="" e.trys.push([0,3,,4]),(null="==(r=null==t?void" 0:t.contentdocument)||void="" 0="==r?void" 0:r.body)?[4,l(t.contentdocument.body,{},!0)]:[3,2];case="" 1:return[2,e.sent()];case="" 2:return[3,4];case="" 3:return="" e.sent(),[3,4];case="" 4:return[2,t.clonenode(!1)]}}))}))}function="" a(t,e){return="" d(e,element)&&(function(t,e){var="" n="e.style;if(n){var" r="window.getComputedStyle(t);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):o(r).forEach((function(i){var" o="r.getPropertyValue(i);if(&quot;font-size&quot;===i&&o.endsWith(&quot;px&quot;)){var" u="Math.floor(parseFloat(o.substring(0,o.length-2)))-.1;o=&quot;&quot;.concat(u,&quot;px&quot;)}d(t,HTMLIFrameElement)&&&quot;display&quot;===i&&&quot;inline&quot;===o&&(o=&quot;block&quot;),&quot;d&quot;===i&&e.getAttribute(&quot;d&quot;)&&(o=&quot;path(&quot;.concat(e.getAttribute(&quot;d&quot;),&quot;)&quot;)),n.setProperty(i,o,r.getPropertyPriority(i))}))}}(t,e),function(t,e){p(t,e,&quot;:before&quot;),p(t,e,&quot;:after&quot;)}(t,e),function(t,e){d(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),d(t,HTMLInputElement)&&e.setAttribute(&quot;value&quot;,t.value)}(t,e),function(t,e){if(d(t,HTMLSelectElement)){var" n="e,r=Array.from(n.children).find((function(e){return" t.value="==e.getAttribute(&quot;value&quot;)}));r&&r.setAttribute(&quot;selected&quot;,&quot;&quot;)}}(t,e)),e}function" l(t,r,i){return="" e(this,void="" 0,void="" 0,(function(){return="" n(this,(function(u){return="" i||!r.filter||r.filter(t)?[2,promise.resolve(t).then((function(t){return="" function(t,r){return="" e(this,void="" 0,void="" 0,(function(){return="" n(this,(function(e){return="" d(t,htmlcanvaselement)?[2,p(t)]:d(t,htmlvideoelement)?[2,r(t,r)]:d(t,htmliframeelement)?[2,t(t)]:[2,t.clonenode(!1)]}))}))}(t,r)})).then((function(i){return="" function(t,r,i){var="" u,c;return="" e(this,void="" 0,void="" 0,(function(){var="" e;return="" n(this,(function(n){switch(n.label){case="" 0:return="" e="[],0===(e=null!=(a=t).tagName&&&quot;SLOT&quot;===a.tagName.toUpperCase()&&t.assignedNodes?o(t.assignedNodes()):d(t,HTMLIFrameElement)&&(null===(u=t.contentDocument)||void" 0="==u?void" 0:u.body)?o(t.contentdocument.body.childnodes):o((null!="=(c=t.shadowRoot)&&void" 0!="=c?c:t).childNodes)).length||d(t,HTMLVideoElement)?[2,r]:[4,e.reduce((function(t,e){return" t.then((function(){return="" l(e,i)})).then((function(t){t&&r.appendchild(t)}))}),promise.resolve())];case="" 1:return="" n.sent(),[2,r]}var="" a}))}))}(t,i,r)})).then((function(e){return="" a(t,e)})).then((function(t){return="" function(t,r){return="" e(this,void="" 0,void="" 0,(function(){var="" e,i,o,u,c,a,s,l,f,h,d,v,p;return="" n(this,(function(n){switch(n.label){case="" 0:if(0="==(e=t.querySelectorAll?t.querySelectorAll(&quot;use&quot;):[]).length)return[2,t];i={},p=0,n.label=1;case" 1:return=""></i;u+=1)o[u]=r.charcodeat(u);n(new><e.length?(o=e[p],(u=o.getattribute("xlink:href"))?(c=t.queryselector(u),a=document.queryselector(u),c||!a||i[u]?[3,3]:(s=i,l=u,[4,l(a,r,!0)])):[3,3]):[3,4];case 2:s[l]="n.sent(),n.label=3;case" 3:return="" p++,[3,1];case="" 4:if((f=""></e.length?(o=e[p],(u=o.getattribute("xlink:href"))?(c=t.queryselector(u),a=document.queryselector(u),c||!a||i[u]?[3,3]:(s=i,l=u,[4,l(a,r,!0)])):[3,3]):[3,4];case><f.length;p++)v.appendchild(f[p]);t.appendchild(d)}return[2,t]}}))}))}(t,r)}))]:[2,null]}))}))}var n="/url\((['&quot;]?)([^'&quot;]+?)\1\)/g,k=/url\([^)]+\)\s*format\(([&quot;']?)([^&quot;']+)\1\)/g,I=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function" d(t,r,i,o,u){return="" e(this,void="" 0,void="" 0,(function(){var="" e,c,a,s;return="" n(this,(function(n){switch(n.label){case="" 0:return="" n.trys.push([0,5,,6]),e="i?function(t,e){if(t.match(/^[a-z]+:\/\//i))return" t;if(t.match(/^\/\//))return="" window.location.protocol+t;if(t.match(/^[a-z]+:/i))return="" t;var="" n="document.implementation.createHTMLDocument(),r=n.createElement(&quot;base&quot;),i=n.createElement(&quot;a&quot;);return" n.head.appendchild(r),n.body.appendchild(i),e&&(r.href="e),i.href=t,i.href}(r,i):r,c=b(r),a=void" 0,u?[4,u(e)]:[3,2];case="" 1:return="" s="n.sent(),a=x(s,c),[3,4];case" 2:return[4,c(e,c,o)];case="" 3:a="n.sent(),n.label=4;case" 4:return[2,t.replace((l="r,f=l.replace(/([.*+?^${}()|\[\]\/\\])/g,&quot;\\$1&quot;),new" regexp("(url\\(['\"]?)(".concat(f,")(['\"]?\\))"),"g")),"$1".concat(a,"$3"))];case="" 5:return="" n.sent(),[3,6];case="" 6:return[2,t]}var="" l,f}))}))}function="" m(t){return-1!="=t.search(N)}function" h(t,r,i){return="" e(this,void="" 0,void="" 0,(function(){var="" e,o;return="" n(this,(function(n){return="" m(t)?(e="function(t,e){var" n="e.preferredFontFormat;return" n?t.replace(i,(function(t){for(;;){var="" e="k.exec(t)||[],r=e[0],i=e[2];if(!i)return&quot;&quot;;if(i===n)return&quot;src:" ".concat(r,";")}})):t}(t,i),o="function(t){var" e="[];return" t.replace(n,(function(t,n,r){return="" e.push(r),t})),e.filter((function(t){return!y(t)}))}(e),[2,o.reduce((function(t,e){return="" t.then((function(t){return="" d(t,e,r,i)}))}),promise.resolve(e))]):[2,t]}))}))}function="" v(t,r,i){var="" o;return="" e(this,void="" 0,void="" 0,(function(){var="" e,u;return="" n(this,(function(n){switch(n.label){case="" 0:return(e="null===(o=r.style)||void" 0="==o?void" 0:o.getpropertyvalue(t))?[4,h(e,null,i)]:[3,2];case="" 1:return="" u="n.sent(),r.style.setProperty(t,u,r.style.getPropertyPriority(t)),[2,!0];case" 2:return[2,!1]}}))}))}function="" f(t,r){return="" e(this,void="" 0,void="" 0,(function(){return="" n(this,(function(e){switch(e.label){case="" 0:return[4,v("background",t,r)];case="" 1:return="" e.sent()?[3,3]:[4,v("background-image",t,r)];case="" 2:e.sent(),e.label="3;case" 3:return[4,v("mask",t,r)];case="" 4:return="" e.sent()?[3,6]:[4,v("mask-image",t,r)];case="" 5:e.sent(),e.label="6;case" 6:return[2]}}))}))}function="" j(t,r){return="" e(this,void="" 0,void="" 0,(function(){var="" e,i,o;return="" n(this,(function(n){switch(n.label){case="" 0:return(e="d(t,HTMLImageElement))&&!y(t.src)||d(t,SVGImageElement)&&!y(t.href.baseVal)?[4,C(i=e?t.src:t.href.baseVal,b(i),r)]:[2];case" 1:return="" o="n.sent(),[4,new" promise((function(n,r){t.onload="n,t.onerror=r;var" i="t;i.decode&&(i.decode=n),&quot;lazy&quot;===i.loading&&(i.loading=&quot;eager&quot;),e?(t.srcset=&quot;&quot;,t.src=o):t.href.baseVal=o}))];case" 2:return="" n.sent(),[2]}}))}))}function="" q(t,r){return="" e(this,void="" 0,void="" 0,(function(){var="" e,i;return="" n(this,(function(n){switch(n.label){case="" 0:return="" e="o(t.childNodes),i=e.map((function(t){return" u(t,r)})),[4,promise.all(i).then((function(){return="" t}))];case="" 1:return="" n.sent(),[2]}}))}))}function="" u(t,r){return="" e(this,void="" 0,void="" 0,(function(){return="" n(this,(function(e){switch(e.label){case="" 0:return="" d(t,element)?[4,f(t,r)]:[3,4];case="" 1:return="" e.sent(),[4,j(t,r)];case="" 2:return="" e.sent(),[4,q(t,r)];case="" 3:e.sent(),e.label="4;case" 4:return[2]}}))}))}var="" o="{};function" b(t){return="" e(this,void="" 0,void="" 0,(function(){var="" e,r;return="" n(this,(function(n){switch(n.label){case="" 0:return="" null!="(e=O[t])?[2,e]:[4,fetch(t)];case" 1:return[4,n.sent().text()];case="" 2:return="" r="n.sent(),e={url:t,cssText:r},O[t]=e,[2,e]}}))}))}function" z(t,r){return="" e(this,void="" 0,void="" 0,(function(){var="" i,o,u,c,a="this;return" n(this,(function(s){return="" i="t.cssText,o=/url\([&quot;']?([^&quot;')]+)[&quot;']?\)/g,u=i.match(/url\([^)]+\)/g)||[],c=u.map((function(u){return" e(a,void="" 0,void="" 0,(function(){var="" e;return="" n(this,(function(n){return(e="u.replace(o,&quot;$1&quot;)).startsWith(&quot;https://&quot;)||(e=new" url(e,t.url).href),[2,s(e,r.fetchrequestinit,(function(t){var="" e="t.result;return" i="i.replace(u,&quot;url(&quot;.concat(e,&quot;)&quot;)),[u,e]}))]}))}))})),[2,Promise.all(c).then((function(){return" i}))]}))}))}function="" w(t){if(null="=t)return[];for(var" e="[],n=t.replace(/(\/\*[\s\S]*?\*\/)/gi,&quot;&quot;),r=new" regexp("((@.*?keyframes="" [\\s\\s]*?){([\\s\\s]*?}\\s*?)})","gi");;){if(null="==(u=r.exec(n)))break;e.push(u[0])}n=n.replace(r,&quot;&quot;);for(var" i="/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o=new" regexp("((\\s*?(?:\\/\\*[\\s\\s]*?\\*\\/)?\\s*?@media[\\s\\s]*?){([\\s\\s]*?)}\\s*?})|(([\\s\\s]*?){([\\s\\s]*?)})","gi");;){var="" u;if(null="==(u=i.exec(n))){if(null===(u=o.exec(n)))break;i.lastIndex=o.lastIndex}else" o.lastindex="i.lastIndex;e.push(u[0])}return" e}function="" $(t,r){return="" e(this,void="" 0,void="" 0,(function(){var="" e,i;return="" n(this,(function(n){return="" e="[],i=[],t.forEach((function(e){if(&quot;cssRules&quot;in" e)try{o(e.cssrules||[]).foreach((function(t,n){if(t.type="==CSSRule.IMPORT_RULE){var" o="n+1,u=B(t.href).then((function(t){return" z(t,r)})).then((function(t){return="" w(t).foreach((function(t){try{e.insertrule(t,t.startswith("@import")?o+="1:e.cssRules.length)}catch(e){console.error(&quot;Error" inserting="" rule="" from="" remote="" css",{rule:t,error:e})}}))})).catch((function(t){console.error("error="" loading="" remote="" css",t.tostring())}));i.push(u)}}))}catch(o){var="" n="t.find((function(t){return" null="=t.href}))||document.styleSheets[0];null!=e.href&&i.push(B(e.href).then((function(t){return" z(t,r)})).then((function(t){return="" w(t).foreach((function(t){n.insertrule(t,e.cssrules.length)}))})).catch((function(t){console.error("error="" loading="" remote="" stylesheet",t)}))),console.error("error="" inlining="" remote="" css="" file",o)}})),[2,promise.all(i).then((function(){return="" t.foreach((function(t){if("cssrules"in="" t)try{o(t.cssrules||[]).foreach((function(t){e.push(t)}))}catch(e){console.error("error="" while="" reading="" css="" rules="" from="" ".concat(t.href),e)}})),e}))]}))}))}function="" _(t){return="" t.filter((function(t){return="" t.type="==CSSRule.FONT_FACE_RULE})).filter((function(t){return" m(t.style.getpropertyvalue("src"))}))}function="" g(t,r){return="" e(this,void="" 0,void="" 0,(function(){return="" n(this,(function(e){switch(e.label){case="" 0:if(null="=t.ownerDocument)throw" new="" error("provided="" element="" is="" not="" within="" a="" document");return[4,$(o(t.ownerdocument.stylesheets),r)];case="" 1:return[2,_(e.sent())]}}))}))}function="" j(t,r){return="" e(this,void="" 0,void="" 0,(function(){var="" e;return="" n(this,(function(n){switch(n.label){case="" 0:return[4,g(t,r)];case="" 1:return="" e="n.sent(),[4,Promise.all(e.map((function(t){var" e="t.parentStyleSheet?t.parentStyleSheet.href:null;return" h(t.csstext,e,r)})))];case="" 2:return[2,n.sent().join("\n")]}}))}))}function="" q(t,r){return="" e(this,void="" 0,void="" 0,(function(){var="" e,i,o,u,c;return="" n(this,(function(n){switch(n.label){case="" 0:return="" null="=r.fontEmbedCSS?[3,1]:(i=r.fontEmbedCSS,[3,5]);case" 1:return="" r.skipfonts?(o="null,[3,4]):[3,2];case" 2:return[4,j(t,r)];case="" 3:o="n.sent(),n.label=4;case" 4:i="o,n.label=5;case" 5:return(e="i)&&(u=document.createElement(&quot;style&quot;),c=document.createTextNode(e),u.appendChild(c),t.firstChild?t.insertBefore(u,t.firstChild):t.appendChild(u)),[2]}}))}))}function" x(t,r){return="" void="" 0="==r&&(r={}),e(this,void" 0,void="" 0,(function(){var="" e,i,o,u;return="" n(this,(function(n){switch(n.label){case="" 0:return="" e="c(t,r),i=e.width,o=e.height,[4,L(t,r,!0)];case" 1:return[4,q(u="n.sent(),r)];case" 2:return="" n.sent(),[4,u(u,r)];case="" 3:return="" n.sent(),function(t,e){var="" n="t.style;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=&quot;&quot;.concat(e.width,&quot;px&quot;)),e.height&&(n.height=&quot;&quot;.concat(e.height,&quot;px&quot;));var" r="e.style;null!=r&&Object.keys(r).forEach((function(t){n[t]=r[t]}))}(u,r),[4,h(u,i,o)];case" 4:return[2,n.sent()]}}))}))}function="" k(t,r){return="" void="" 0="==r&&(r={}),e(this,void" 0,void="" 0,(function(){var="" e,i,o,u,s,f,h,d,v;return="" n(this,(function(n){switch(n.label){case="" 0:return="" e="c(t,r),i=e.width,o=e.height,[4,X(t,r)];case" 1:return[4,l(n.sent())];case="" 2:return="" u="n.sent(),s=document.createElement(&quot;canvas&quot;),f=s.getContext(&quot;2d&quot;),h=r.pixelRatio||function(){var" t,e;try{e="process}catch(t){}var" n="e&&e.env?e.env.devicePixelRatio:null;return" n&&(t="parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}(),d=r.canvasWidth||i,v=r.canvasHeight||o,s.width=d*h,s.height=v*h,r.skipAutoScale||function(t){(t.width">a||t.height>a)&&(t.width>a&&t.height>a?t.width>t.height?(t.height*=a/t.width,t.width=a):(t.width*=a/t.height,t.height=a):t.width>a?(t.height*=a/t.width,t.width=a):(t.width*=a/t.height,t.height=a))}(s),s.style.width="".concat(d),s.style.height="".concat(v),r.backgroundColor&&(f.fillStyle=r.backgroundColor,f.fillRect(0,0,s.width,s.height)),f.drawImage(u,0,0,s.width,s.height),[2,s]}}))}))}t.getFontEmbedCSS=function(t,r){return void 0===r&&(r={}),e(this,void 0,void 0,(function(){return n(this,(function(e){return[2,J(t,r)]}))}))},t.toBlob=function(t,r){return void 0===r&&(r={}),e(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,K(t,r)];case 1:return[4,s(e.sent())];case 2:return[2,e.sent()]}}))}))},t.toCanvas=K,t.toJpeg=function(t,r){return void 0===r&&(r={}),e(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,K(t,r)];case 1:return[2,e.sent().toDataURL("image/jpeg",r.quality||1)]}}))}))},t.toPixelData=function(t,r){return void 0===r&&(r={}),e(this,void 0,void 0,(function(){var e,i,o,u;return n(this,(function(n){switch(n.label){case 0:return e=c(t,r),i=e.width,o=e.height,[4,K(t,r)];case 1:return u=n.sent(),[2,u.getContext("2d").getImageData(0,0,i,o).data]}}))}))},t.toPng=function(t,r){return void 0===r&&(r={}),e(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,K(t,r)];case 1:return[2,e.sent().toDataURL()]}}))}))},t.toSvg=X}));
//# sourceMappingURL=html-to-image.js.map
</f.length;p++)v.appendchild(f[p]);t.appendchild(d)}return[2,t]}}))}))}(t,r)}))]:[2,null]}))}))}var></script><script>// const canvas = document.querySelector('canvas');
// const ctx = canvas.getContext("2d");

// console.log(ctx.width);
// ctx.lineWidth = 1;
// ctx.strokeStyle = "#cccccc";
// roundRect(ctx, 1, 1, canvas.width-2, canvas.height-2, 32, false, true);
// ctx.stroke();

// function roundRect(ctx, x, y, width, height, radius, fill, stroke) {
//     if (typeof stroke === "undefined") {
//         stroke = true;
//     }
//     if (typeof radius === "undefined") {
//         radius = 5;
//     }
//     if (typeof radius === "number") {
//         radius = { tl: radius, tr: radius, br: radius, bl: radius };
//     } else {
//         var defaultRadius = { tl: 0, tr: 0, br: 0, bl: 0 };
//         for (var side in defaultRadius) {
//             radius[side] = radius[side] || defaultRadius[side];
//         }
//     }
//     ctx.beginPath();
//     ctx.moveTo(x + radius.tl, y);
//     ctx.lineTo(x + width - radius.tr, y);
//     ctx.quadraticCurveTo(x + width, y, x + width, y + radius.tr);
//     ctx.lineTo(x + width, y + height - radius.br);
//     ctx.quadraticCurveTo(
//         x + width,
//         y + height,
//         x + width - radius.br,
//         y + height
//     );
//     ctx.lineTo(x + radius.bl, y + height);
//     ctx.quadraticCurveTo(x, y + height, x, y + height - radius.bl);
//     ctx.lineTo(x, y + radius.tl);
//     ctx.quadraticCurveTo(x, y, x + radius.tl, y);
//     ctx.closePath();
//     if (fill) {
//         ctx.fill();
//     }
//     if (stroke) {
//         ctx.stroke();
//     }
// }
const file = document.querySelector('[type=file]');
const img = document.querySelector('img');
var node = document.getElementById('my-node');
const text = document.querySelector('.text');
const textarea = document.querySelector('textarea');
textarea.addEventListener('input', evt => {
    text.innerHTML=textarea.value.split('\n')
    .map(v=>`<p>${v}</p>`).join('');
    buildImage()
});

file.addEventListener('change', evt => {
    const reader = new FileReader();
    reader.addEventListener("load", function () { // Setting up base64 URL on image
        img.src = reader.result;
        img.onload = () => {
            const width = Math.min(img.naturalWidth, 800);
            node.style.width = width + "px";
            if (width > 400) {
                node.style.fontSize = '28px';
                text.style.padding = '24px';
            }
            
        }
    }, false);
    reader.readAsDataURL(file.files[0]);
});


function buildImage() {
    htmlToImage.toJpeg(node)
        .then(function (dataUrl) {
            var img = new Image();
            img.src = dataUrl;
            document.body.appendChild(img);
        })
        .catch(function (error) {
            console.error('oops, something went wrong!', error);
        });
}
</script></body>


</html>